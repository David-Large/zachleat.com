<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>enterval, an automatic <span class="widow">setInterval chainer.</span>—zachleat.com</title>
		<link href="/atom.xml" rel="alternate" title="Web 367 via zachleat.com" type="application/atom+xml">

		<link href="/web/css/global.css" rel="stylesheet">
	</head>
	<body>
		<div class="rail">
			<header>
				<a href="/web/">
					<h1>Web 3.0, 6 Bladed Razors, 7 Minute Abs</h1>
				</a>
				<h2>A bunch of words by zachleat.</h2>
			</header>
			<aside>
				<nav role="navigation">
				</nav>
			</aside>
		</div>
		<div class="content">
			<div class="main" data-role="main">
				<article>
<h1>enterval, an automatic <span class="widow">setInterval chainer.</span></h1>
<em>Posted on 23 Dec 2007</em>
<h1></h1>

<p>Hello internet. Today we’ll be exploring the magical wonders of setInterval. Have you ever worked on a project that needed multiple timers going simultaneously? Have you ever wanted to bind all of those timer callbacks into just one timer without restructuring your code manually? Well, being the Curious George that I am, I wanted to know the performance benefits of the grouping callbacks and eliminating unnecessary timers. Here’s the code I used to do it:</p>

<p>Instead of:</p>

<pre><code>window.setInterval&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /* Payload! */ &amp;#125;, 100&amp;#41;;
window.setInterval&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /* Payload! */ &amp;#125;, 100&amp;#41;;
window.setInterval&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /* Payload! */ &amp;#125;, 100&amp;#41;; 
// results in three separate timers.
</code></pre>

<p>You can do:</p>

<pre><code>enterval.set&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /*Payload */ &amp;#125;, 100&amp;#41;;
enterval.set&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /*Payload */ &amp;#125;, 100&amp;#41;; // combines with the first 100ms interval.
enterval.set&amp;#40;function&amp;#40;&amp;#41;&amp;#123; /*Payload */ &amp;#125;, 100&amp;#41;; // combines with the first two 100ms intervals.
// results in one timer, containing all three callbacks.
</code></pre>

<p>Here’s the code:</p>

<pre><code>var enterval = &amp;#40;function&amp;#40;&amp;#41;
&amp;#123;
    var intervals   = &amp;#123;&amp;#125;;
&amp;nbsp;
    function add&amp;#40;callback, interval&amp;#41;
    &amp;#123;
        var index = ;
        if&amp;#40;intervals&amp;#91;interval&amp;#93;&amp;#41; &amp;#123;
            index = intervals&amp;#91;interval&amp;#93;.length;
            intervals&amp;#91;interval&amp;#93;.push&amp;#40;callback&amp;#41;;
        &amp;#125; else &amp;#123;
            intervals&amp;#91;interval&amp;#93; = &amp;#91;callback&amp;#93;;
            window.setTimeout&amp;#40;call, interval, interval&amp;#41;;
        &amp;#125;
        return interval ':' index;
    &amp;#125;
&amp;nbsp;
    function call&amp;#40;interval&amp;#41;
    &amp;#123;
        var d = intervals&amp;#91;interval&amp;#93;;
        for&amp;#40;var j=,k=d.length;j
</code></pre>

</article>
			</div><!-- /.main -->
		</div><!-- /.content -->
		<script type="text/javascript">
		// var _gaq = _gaq || [];
		// _gaq.push(['_setAccount', '']);
		// _gaq.push(['_trackPageview']);

		// (function() {
		// 	var ga = document.createElement('script');
		// 	ga.type = 'text/javascript';
		// 	ga.async = true;
		// 	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		// 	var s = document.getElementsByTagName('script')[0];
		// 	s.parentNode.insertBefore(ga, s);
		// })();
		</script>
	</body>
</html>