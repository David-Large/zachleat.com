<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Architecture Choices: Callbacks and Events <span class="widow">in JavaScript</span>—zachleat.com</title>
		<link href="/atom.xml" rel="alternate" title="Web 367 via zachleat.com" type="application/atom+xml">

		<link href="/web/css/global.css" rel="stylesheet">
	</head>
	<body>
		<div class="rail">
			<header>
				<a href="/web/">
					<h1>Web 3.0, 6 Bladed Razors, 7 Minute Abs</h1>
				</a>
				<h2>A bunch of words by zachleat.</h2>
			</header>
			<aside>
				<nav role="navigation">
				</nav>
			</aside>
		</div>
		<div class="content">
			<div class="main" data-role="main">
				<article>
<h1>Architecture Choices: Callbacks and Events <span class="widow">in JavaScript</span></h1>
<em>Posted on 28 Mar 2008</em>
<h1></h1>

<p><em>Warning: Blog Post written for Beginner and Intermediate JavaScript Developers</em></p>

<p>Like any well intentioned programmer, you’re writing reusable code in JavaScript. Maybe it’s a simple widget, maybe it’s a higher level plug-in for your favorite JavaScript library. But now you want to provide a mechanism for your friendly neighborhood developer to extend your code by hooking into it with a little bit of code of their own. How do you accomplish this?</p>

<p>Generally, it can be done one of two ways:</p>

<ul>
<li>A callback function</li>
<li>A custom event</li>
</ul>


<p>A callback function is a function passed into your code as an argument that will be executed at the time the library code specifies. For instance, callback functions are usually supplied for for Ajax XmlHttpRequest’s to execute, one callback if the Ajax Request is successful, and another on failure. See the following code as an example:</p>

<p>End-Developer’s Code:</p>

<pre><code>$.ajax&amp;#40;&amp;#123;
   type: "POST",
   url: "some.php",
   data: "name=John&amp;location=Boston",
   success: function&amp;#40;msg&amp;#41;&amp;#123;
     alert&amp;#40; "Data Saved: "   msg &amp;#41;;
   &amp;#125;
 &amp;#125;&amp;#41;;
</code></pre>

<p>Library Code (from jQuery):</p>

<pre><code>// taken out of context, just know that s stands for the options object passed into $.ajax() above.
if &amp;#40; s.success &amp;#41;
    s.success&amp;#40; data, status &amp;#41;;
</code></pre>

<p>In the above code example taken straight from the <a href="http://docs.jquery.com/Ajax/jQuery.ajax#options">jQuery documentation</a>, the success key of the object being passed into the ajax() function is a callback function. It will be executed after the Ajax request has successfully completed.</p>

<p>The other mechanism you can use for controlling dependent function execution is a custom event. Custom events provide more flexability because they use the publish/subscribe mechanism. That means, instead of the library author deciding how many callbacks he or she is going to allow you to pass into their method as arguments, he or she will just trigger a custom event, which will fire all functions the end-developer has said they want to subscribe to that event. See the following example from the jQuery documentation.</p>

<p>End-Developer’s Code:</p>

<pre><code>$&amp;#40;document&amp;#41;.bind&amp;#40;"myCustomEvent", function&amp;#40;e, msg&amp;#41;&amp;#123;
   alert&amp;#40; "Data Saved: "   msg &amp;#41;;
&amp;#125;&amp;#41;;
$&amp;#40;document&amp;#41;.bind&amp;#40;"myCustomEvent", function&amp;#40;e, msg&amp;#41;&amp;#123;
   alert&amp;#40; "More Data Saved: "   msg &amp;#41;;
&amp;#125;&amp;#41;;
// We can subscribe as many functions as we want to myCustomEvent.
</code></pre>

<p>Library Code:</p>

<pre><code>// again, no context here
$&amp;#40;document&amp;#41;.trigger&amp;#40;"myCustomEvent", &amp;#91; "My Message" &amp;#93;&amp;#41;;
</code></pre>

<p>As you can see above, custom events are much more extensible and customizable to your needs. Want to attach 10 functions to myCustomEvent? Sure, go right ahead. Want to try to attach 10 callbacks to the ajax success method above, that’s going to be a bit more work. The benefit to using callbacks lies in their disposability and isolation. Perhaps you don’t want to publish to the world when your Ajax Request completes — maybe you just want to handle the completion and be done with it.</p>

<p>Let’s Review.</p>

<p><strong>Callback Functions</strong>: Private Disposable – Limited by Design of Parent Code (Number of callbacks)<br/>
<strong>Custom Events</strong>: Extensible (Any number of functions attached) – Public – Not Disposable (Functions stay attached after execution, and continue to fire when triggered)</p>

</article>
			</div><!-- /.main -->
		</div><!-- /.content -->
		<script type="text/javascript">
		// var _gaq = _gaq || [];
		// _gaq.push(['_setAccount', '']);
		// _gaq.push(['_trackPageview']);

		// (function() {
		// 	var ga = document.createElement('script');
		// 	ga.type = 'text/javascript';
		// 	ga.async = true;
		// 	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		// 	var s = document.getElementsByTagName('script')[0];
		// 	s.parentNode.insertBefore(ga, s);
		// })();
		</script>
	</body>
</html>