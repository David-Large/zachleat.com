<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Wash your mouth out with SOAP and the YUI <span class="widow">Connection Manager</span>—zachleat.com</title>
		<link href="/atom.xml" rel="alternate" title="Web 367 via zachleat.com" type="application/atom+xml">

		<link href="/web/css/global.css" rel="stylesheet">
	</head>
	<body>
		<div class="rail">
			<header>
				<a href="/web/">
					<h1>Web 3.0, 6 Bladed Razors, 7 Minute Abs</h1>
				</a>
				<h2>A bunch of words by zachleat.</h2>
			</header>
			<aside>
				<nav role="navigation">
				</nav>
			</aside>
		</div>
		<div class="content">
			<div class="main" data-role="main">
				<article>
<h1>Wash your mouth out with SOAP and the YUI <span class="widow">Connection Manager</span></h1>
<em>Posted on 09 May 2007</em>
<h1></h1>

<p>Now you’ve done it. You watched an R rated movie while your parents weren’t looking and used some of your newfound acquired colorful language in front of them. Your mom goes for the Dial Liquid Soap, she’s going to wash that profanity right out of your dirty little mouth.</p>

<p>Harsh? Maybe, but I couldn’t say the word ‘Bastards’ without feeling Dial on my cleansed taste buds. Maybe I should take legal action against the cinematic classic ‘<a href="http://www.imdb.com/title/tt0102059/">Hot Shots</a>.’</p>

<p>What are we here for? Not liquid soap, perhaps some profanity. But really, you want to use the SOAP web services protocol with your Yahoo User Interface application, in particular the Connection Manager component. This tutorial assumes you are at least familiar with <a href="http://developer.yahoo.com/yui/connection/">the examples provided on the Yahoo! UI Library: Connection Manager website</a>.</p>

<p>How is SOAP different than any other AJAX call using the Connection Manager? Well, normally, when you perform an HTTP Post AJAX call, it is passing in a key-value pair string encoded with the normal key=value&amp;key2=value format. But when doing a SOAP call, we want to post an XML SOAP Envelope to the server instead of this key-value pair string. In case you’re reading this article and don’t know what a SOAP Envelope looks like, I’ll post a sample here:<br/>
`</p>

<p>`</p>

<p>Of course, it is beyond the scope of this article to argue whether a REST or a SOAP format for your Service Oriented Architecture is a better choice. You’re stuck with SOAP, otherwise you wouldn’t have read this far.</p>

<p>So, let’s post our SOAP Envelope using the YUI Connection Manager with the code provided below:</p>

<pre><code>var targetUrl = 'http://www.zachleat.com/postToServer.php'; // this is not a real URL
&amp;nbsp;
var callback = &amp;#123;
    success: function&amp;#40;o&amp;#41;
    &amp;#123;
        var root = o.responseXML.documentElement; 
        if&amp;#40; root.getElementsByTagName&amp;#40; 'faultstring' &amp;#41;.length &gt;  &amp;#41; // faultstring is a standard SOAP error message format
        &amp;#123;
            var faultstring = root.getElementsByTagName&amp;#40; 'faultstring' &amp;#41;&amp;#91;&amp;#93;.firstChild.nodeValue;
            var detailed = '';
            YAHOO.UP.util.each&amp;#40; root.getElementsByTagName&amp;#40; 'detail' &amp;#41;&amp;#91;&amp;#93;.childNodes, function&amp;#40; j, textNode &amp;#41;
            &amp;#123;
                if&amp;#40; textNode.nodeValue != null &amp;#41; detailed  = textNode.nodeValue;
            &amp;#125; &amp;#41;;
            // do something with your error message stored in the faultstring variable, with a more detailed message in the detailed variable
        &amp;#125; else &amp;#123;
            // this is an actual success.
        &amp;#125;
    &amp;#125;, 
    failure: function&amp;#40; o &amp;#41;
    &amp;#123;
        // do something with your failure.
    &amp;#125;
&amp;#125;;
&amp;nbsp;
var message = '
</code></pre>

</article>
			</div><!-- /.main -->
		</div><!-- /.content -->
		<script type="text/javascript">
		// var _gaq = _gaq || [];
		// _gaq.push(['_setAccount', '']);
		// _gaq.push(['_trackPageview']);

		// (function() {
		// 	var ga = document.createElement('script');
		// 	ga.type = 'text/javascript';
		// 	ga.async = true;
		// 	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		// 	var s = document.getElementsByTagName('script')[0];
		// 	s.parentNode.insertBefore(ga, s);
		// })();
		</script>
	</body>
</html>