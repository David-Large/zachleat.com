{"disqus":{"path":"/web/cross-domain-xhr-with-firefox/","commentCount":18,"comments":[{"postId":"887461698","parentPostId":null,"date":"2007-10-30T14:03:53Z","author":"alberto","avatar":"https://www.gravatar.com/avatar/73d7c6e24b8b321a0bb1d9f2a4fcdf9a?d=mm&s=60","message":"<p>this method works as well but when I need to read the response xml i get this exception:</p><p>uncaught exception: Permission denied to get property XMLDocument.firstChild</p><p>any solution?? <br>i don't want to use ie6/7 again for this purpose...</p>","replies":[]},{"postId":"887461697","parentPostId":null,"date":"2007-10-31T02:56:54Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>If you read the solution carefully you will see that you can add that exact property to your prefs.js like so:</p><p>user_pref(\"capability.policy.default.XMLDocument.firstChild\", \"allAccess\");</p><p>Anytime you get a \"Permission denied\" exception, this solution should work</p>","replies":[]},{"postId":"887461695","parentPostId":null,"date":"2008-01-26T18:16:15Z","author":"Shaun","avatar":"https://www.gravatar.com/avatar/f62f16dec3d43ccf421d64b85d6add7a?d=mm&s=60","message":"<p>Rather than set these preferences on the default profile, set them on a custom one that's only available for your development site:<br><code><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.sites\", \"http://YOURDEVHOSTHERE\");<br>user_pref(\"capability.policy.policynames\", \"XMLHttpRequestToAnySite\");<br></code></p><p>Here's the final list I ended up using, which includes a few new ones than the OP:</p><p><code><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.CDATASection.nodeValue\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.attributes\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.childNodes\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.firstChild\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.getAttribute\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.getElementsByTagName\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.nodeType\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.nodeName\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Element.tagName\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.HTMLCollection.length\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.HTMLCollection.item\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.ProcessingInstruction.nodeType\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.ProcessingInstruction.nodeName\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Text.nodeType\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Text.nodeName\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Text.data\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.Text.nodeValue\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLDocument.documentElement\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLDocument.getElementsByTagName\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLDocument.nodeType\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLDocument.nodeName\", \"allAccess\");<br><br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.channel\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.responseText\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.responseXML\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.send\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.setRequestHeader\", \"allAccess\");<br>user_pref(\"capability.policy.XMLHttpRequestToAnySite.XMLHttpRequest.open\", \"allAccess\");<br></code></p>","replies":[]},{"postId":"887461696","parentPostId":null,"date":"2008-02-07T05:27:46Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Great comment Shaun!  That will definitely tighten the security up.</p>","replies":[]},{"postId":"887461694","parentPostId":null,"date":"2008-02-11T03:30:19Z","author":"Christian Fecteau","avatar":"https://www.gravatar.com/avatar/09f3b9721317de2bfe4a1d34a4694a60?d=mm&s=60","message":"<p>Shaun or Zach, how would I do the same for UniversalXPConnect? I'm trying to make myself a Firefox favelet that would search this French dictionnary automatically with my clipboard text:<br><a href=\"http://atilf.atilf.fr/dendien/scripts/tlfiv4/showps.exe?p=combi.htm\" rel=\"nofollow noopener\" title=\"http://atilf.atilf.fr/dendien/scripts/tlfiv4/showps.exe?p=combi.htm\">http://atilf.atilf.fr/dendi...</a></p><p>I'm so close but I'm still getting this error:<br><code>uncaught exception: Un script de « http://atilf.atilf.fr » s'est vu refuser des privilèges UniversalXPConnect.</code></p><p>I've tried these with no luck in user.js:<br><code>user_pref(\"capability.principal.codebase.p0.granted\", \"UniversalXPConnect\");<br>user_pref(\"capability.principal.codebase.p0.id\", \"http://atilf.atilf.fr\");<br>user_pref(\"capability.principal.codebase.p0.subjectName\", \"\");<br><br>user_pref(\"capability.principal.codebase.p1.granted\", \"UniversalXPConnect\");<br>user_pref(\"capability.principal.codebase.p1.id\", \"http://dell\");<br>user_pref(\"capability.principal.codebase.p1.subjectName\", \"\");<br><br>user_pref(\"capability.policy.policynames\", \"allowclipboard\");<br>user_pref(\"capability.policy.allowclipboard.sites\", \"file:// http://dell http://atilf.atilf.fr\");<br>user_pref(\"capability.policy.allowclipboard.Clipboard.cutcopy\", \"allAccess\");<br>user_pref(\"capability.policy.allowclipboard.Clipboard.paste\", \"allAccess\");<br><br>/*<br>user_pref(\"capability.policy.allowclipboard.UniversalXPConnect.QueryInterface\", \"allAccess\");<br>user_pref(\"capability.policy.allowclipboard.UniversalXPConnect.createInstance\", \"allAccess\");<br>user_pref(\"capability.policy.allowclipboard.UniversalXPConnect.equals\", \"allAccess\");<br>user_pref(\"capability.policy.allowclipboard.UniversalXPConnect.getService\", \"allAccess\");<br>user_pref(\"capability.policy.allowclipboard.UniversalXPConnect.initialize\", \"allAccess\");<br>*/<br></code></p><p>and my favelet:<br><code>function getClipboardText() {<br><br>if (window.clipboardData) // IE<br>return (window.clipboardData.getData('Text'));<br><br>if (!window.netscape) // promt for text if not Mozilla<br>return prompt();<br><br>// ask permission to Mozilla<br>netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');<br><br>// go on with XUL code<br>varclip = Components<br>.classes['@mozilla.org/widget/clipboard;1']<br>.createInstance(Components.interfaces.nsIClipboard),<br>trans = Components<br>.classes['@mozilla.org/widget/transferable;1']<br>.createInstance(Components.interfaces.nsITransferable),<br>str = {},<br>len = {};<br><br>trans.addDataFlavor('text/unicode');<br>clip.getData(trans, clip.kGlobalClipboard);<br>trans.getTransferData('text/unicode', str, len);<br><br>str =Components.interfaces.nsISupportsWString<br>? str.value.QueryInterface(Components.interfaces.nsISupportsWString)<br>: str.value.QueryInterface(Components.interfaces.nsISupportsString);<br><br>return(str.data.substring(0, len.value / 2));<br>}<br><br>var clip = getClipboardText();<br><br>console.log(clip);<br><br>//document.form1.elements.mot.value = clip;<br><br>//verif1();</code></p><p>Thanks for the XHR code. I've added it to my FF dev profile. Now I can code cross-domain ajax.</p>","replies":[]},{"postId":"887461699","parentPostId":null,"date":"2008-02-16T08:54:28Z","author":"Christian Fecteau","avatar":"https://www.gravatar.com/avatar/09f3b9721317de2bfe4a1d34a4694a60?d=mm&s=60","message":"<p>Problem solved. A Firefox search engine xml file has been made for this dictionnary (and more):<br><a href=\"http://www.cnrtl.fr/portail/#footerright\" rel=\"nofollow noopener\" title=\"http://www.cnrtl.fr/portail/#footerright\">http://www.cnrtl.fr/portail...</a></p>","replies":[]},{"postId":"887461701","parentPostId":null,"date":"2008-05-10T03:58:20Z","author":"Jeremy","avatar":"https://www.gravatar.com/avatar/eb5af668862f1872f22f0ae6ce3c49fa?d=mm&s=60","message":"<p>If you want to ensure that what you are developing works for other users who will not want to do this to their firefox use this:</p><p>try{<br>// IE understands this<br>    var xml = $(response.responseXML)<br>    var codes = xml.documentElement.getElementsByTagName(\"code\")<br>}catch(e){<br>//firefox understands this<br>    try{<br>        var xml = (new DOMParser()).parseFromString( response.responseXML, \"text/xml\");<br>        var codes = xml.documentElement.getElementsByTagName(\"code\")<br>    }catch(ee){       <br>    }<br>}</p>","replies":[]},{"postId":"887461714","parentPostId":null,"date":"2008-05-10T08:25:00Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Dude, what?</p><p>To me that says:<br>I can parse an XML document.<br>OR if I can't, try a new way.</p><p>That doesn't have anything to do with XHR, other than supplying using it to supply an XML document.</p>","replies":[]},{"postId":"887461702","parentPostId":null,"date":"2008-05-10T23:10:07Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Also, please keep in mind that this is NOT a production solution.  It's a development solution for individual development machines.</p>","replies":[]},{"postId":"887461706","parentPostId":null,"date":"2008-06-18T19:37:01Z","author":"Arian Hojat","avatar":"https://www.gravatar.com/avatar/b3eda51e3917e0f3ab79523df0d64151?d=mm&s=60","message":"<p>Heard this was a viable production solution:<br>use php to pull the xml, and feed it into the javascript.</p><p><a href=\"http://www.phpfour.com/blog/2008/03/06/cross-domain-ajax-using-php/\" rel=\"nofollow noopener\" title=\"http://www.phpfour.com/blog/2008/03/06/cross-domain-ajax-using-php/\">http://www.phpfour.com/blog...</a></p>","replies":[]},{"postId":"887461708","parentPostId":null,"date":"2008-06-19T03:24:27Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Sure, this method is a client-side only solution.  It's fairly trivial (and common) to use a server side language to act as a proxy for your ajax calls.</p>","replies":[]},{"postId":"887461704","parentPostId":null,"date":"2008-07-09T22:46:07Z","author":"mark","avatar":"https://www.gravatar.com/avatar/24a330f178a7bd66f3f4f35465710865?d=mm&s=60","message":"<p>hi board!</p><p>y have this error, <br>Permiso para obtener la propiedad Element.childNodes denegado</p><p>in english<br>Permission denied to get property Element.childNodes</p><p>and i create prefs.js file, and i have this error yet... i am using V 3.0</p><p>tks for u help.</p>","replies":[]},{"postId":"887461709","parentPostId":null,"date":"2008-08-12T16:31:42Z","author":"Sean","avatar":"https://www.gravatar.com/avatar/9eecef432fc4e4af478fc338d72c7b6b?d=mm&s=60","message":"<p>I've read that the above technique will not work under Firefox 3. My tests seem to confirm this. And, there's this thread:</p><p><a href=\"http://groups.google.com/group/mozilla.dev.apps.firefox/browse_thread/thread/0b3db90e1b452f33/d4fd6124df529739\" rel=\"nofollow noopener\" title=\"http://groups.google.com/group/mozilla.dev.apps.firefox/browse_thread/thread/0b3db90e1b452f33/d4fd6124df529739\">http://groups.google.com/gr...</a></p><p>So, is it game over?</p>","replies":[]},{"postId":"887461713","parentPostId":null,"date":"2008-08-12T17:19:10Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Never say die.</p><p><a href=\"http://developer.mozilla.org/en/docs/Cross-Site_XMLHttpRequest\" rel=\"nofollow noopener\" title=\"http://developer.mozilla.org/en/docs/Cross-Site_XMLHttpRequest\">http://developer.mozilla.or...</a></p><p>Looks like you could make a plugin that enables this for the web :)  Have at it!</p>","replies":[]},{"postId":"887461718","parentPostId":null,"date":"2009-02-12T18:30:52Z","author":"venkat","avatar":"https://www.gravatar.com/avatar/a3d9d9357490ea1478e518bcd6db6457?d=mm&s=60","message":"<p>Hi,</p><p>Many thanks to you. But my firefox doent get updated with the new user prefs. im running 3.0.6. Any clues.</p>","replies":[{"postId":"887477624","parentPostId":"887461718","date":"2009-02-12T22:16:26Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>If you're having trouble modifying your prefs, you probably still have Firefox open.  You must close Firefox when editing prefs.js.  Also, the above code was tested only with Firefox 2, as stated below the headline.</p>","replies":[]}]},{"postId":"887461719","parentPostId":null,"date":"2009-05-09T20:40:27Z","author":"Animal","avatar":"https://www.gravatar.com/avatar/6379e057a776c4653533ab27d2a09476?d=mm&s=60","message":"<p>Sorry, but NONE of this works.</p>","replies":[{"postId":"887461725","parentPostId":"887461719","date":"2009-05-10T19:58:14Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Again, please keep in mind that this post should be considered deprecated, as it does not apply to the current version of Firefox.</p>","replies":[]}]}]}}