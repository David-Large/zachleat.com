{"disqus":{"path":"/web/yet-another-pretty-date-javascript/","commentCount":25,"comments":[{"postId":"887461776","parentPostId":null,"date":"2008-03-25T18:39:54Z","author":"Dean Landolt","avatar":"https://www.gravatar.com/avatar/cba1a5a1a29d781d614ffdb93a164182?d=mm&s=60","message":"<p>Thanks for the fixes. I actually can't take credit for introducing those bugs (just completely missing them) -- I got that piece of code from a comment on Resig's original post which was actually the imputus for me to do the rewrite in the first place...</p><p>I like your code a <em>lot</em> better than mine -- cleaner and easier to understand.</p>","replies":[]},{"postId":"887461771","parentPostId":null,"date":"2008-03-26T02:17:55Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Thanks Dean.  I wouldn't have even noticed the problems had I not been trying to use the script for a project.</p><p>Open source moves solely due to impetus sometimes.</p>","replies":[]},{"postId":"887461777","parentPostId":null,"date":"2008-03-27T11:33:47Z","author":"Jauder Ho","avatar":"https://www.gravatar.com/avatar/e1eb91afe3c2f6dafbf4adb4c269c75a?d=mm&s=60","message":"<p>Cool. This came in useful. Thanks for hacking this out.</p>","replies":[]},{"postId":"887461780","parentPostId":null,"date":"2008-03-28T09:15:55Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>I appreciate the comment.  I hope someone else gets some good use out of it.</p>","replies":[]},{"postId":"887461781","parentPostId":null,"date":"2008-05-06T01:39:08Z","author":"Gary Sherman","avatar":"https://www.gravatar.com/avatar/9e4cf6d6c321d31dfac2b834b3a120b3?d=mm&s=60","message":"<p>Zach,</p><p>Very nice!  This is exactly what I was looking for.<br>Thanks for sharing!</p>","replies":[]},{"postId":"887461779","parentPostId":null,"date":"2008-05-20T17:30:16Z","author":"Hunka","avatar":"https://www.gravatar.com/avatar/eb395c600e8fe031d53fb2730ae334b0?d=mm&s=60","message":"<p>it is really nice script.</p>","replies":[]},{"postId":"887461774","parentPostId":null,"date":"2008-06-28T19:28:02Z","author":"unwiredbrain","avatar":"https://www.gravatar.com/avatar/27a21572566e7cbb44e0d33ef6b0b6e1?d=mm&s=60","message":"<p>Very nice work.</p><p>But there's something I really don't get: if I'm using a future date (think about a dtstart / dtend duet, like hCalendar does), the script treats them as <strong>past</strong> events!</p><p>If current year is 2008 and I'm planning some event for year 2009, the script says \"1 Year Ago\"! This is undoubtedly <strong>wrong</strong>! And should be avoided, of course.</p><p>For me, the problem resides in the first if clause: seconds should not be modified; if seconds are less than zero, then the script should do nothing, returning null.</p><p>A null returning would be very comfortable, allowing control statements as John Resig did in his original scripts; in particular, would be comfortable because you would not soil the innerHTML.</p><p>Also, if you avoid the token, all the script will instantly get more suitable for l10n, making the code more clean and readable.</p>","replies":[]},{"postId":"887461775","parentPostId":null,"date":"2008-06-29T07:21:12Z","author":"unwiredbrain","avatar":"https://www.gravatar.com/avatar/27a21572566e7cbb44e0d33ef6b0b6e1?d=mm&s=60","message":"<p>OK. Wait a sec. My previous comment clearly shows that I did not understand anything about your script. I apologize for that.</p><p>But...</p><p>I (think I) found a glitch -- from now on consider all the dates &amp; everything treated as UTC: if you set a date to exactly now (where \"now\" is the instant where the page loads) the script returns a \"2 Hours\" -- I mean: future!</p><p>Is to be said that I live in a country where right now the time zone is CEST that is GMT plus two hours (see Wikipedia for more), but, as you can easily imagine, in other countries this could vary: zero, one or two, like me, or even more.</p><p>Now: all your script runs using UTC (which is good), but at line 34 you add the current local time zone offset, which is wrong in my opinion.</p><p>I think that this should be fixed, but I look forward to your opinion.</p><p>Anyway, I still think that you should never touch a future date, and I still think that by removing the token you'll get a more compact, readable and elegant code.</p><p>PS: just FYI, here's my test case: <a href=\"http://phpfi.com/327787\" rel=\"nofollow noopener\" title=\"http://phpfi.com/327787\">http://phpfi.com/327787</a></p><p>Leaving the script vanilla, I get the glitch; removing the time zone offset I get the correct behavior.</p><p>Also, you can test this by adding some minutes: just modify the 'difference' variable in the HTML document.</p><p>I hope the whole thing is clearer now.</p><p>Have a nice day.</p>","replies":[]},{"postId":"887461782","parentPostId":null,"date":"2009-01-08T06:57:18Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>@unwiredbrain I tried to check out your test script and it would seem that the link is down.</p><p>Can you repost somewhere else, or include the code?</p><p>I developed this for <a href=\"http://alarmd.com\" rel=\"nofollow noopener\" title=\"http://alarmd.com\">alarmd</a>, so you can see it in action there.  If you add an alarm, it will create a pretty date in the bottom right corner.</p><p>For instance, I just added an alarm for +1h, resulting in 2009-01-08T02:56:38Z.  I'm in CST (-6), which is is right (it's now 7:56PM).</p><p>Thanks,<br>Zach</p>","replies":[]},{"postId":"887461783","parentPostId":null,"date":"2009-01-08T13:10:32Z","author":"unwiredbrain","avatar":"https://www.gravatar.com/avatar/27a21572566e7cbb44e0d33ef6b0b6e1?d=mm&s=60","message":"<p>Zach,</p><p>not receiving a reply for months I deleted all the relative documents; my documents deleted, <a href=\"http://phpfi.com\" rel=\"nofollow noopener\" title=\"phpfi.com\">phpfi.com</a> down... Guess what? I had to recreate the glitch from scratch.</p><p>Let's assume my current system date is 2008-01-08;<br>Let's assume my current system time is 08:45:00;<br>Let's assume my current time zone offset is +0100;<br>Let's assume my current span looks like this:<br><code>&lt;span class=\"dtstart\" title=\"2009-01-08T08:45:00Z+0100\"&gt;Some event that just happened&lt;/span&gt;</code></p><p>On my test page, launching <code>$(\".dtstart\").humane_dates()</code> I will see \"60 Minutes\". Which is future.<br>That's exactly my current local time added with my current local time zone offset.</p><p>Apart from the glitch; being a future event, isn't it supposed to be left as it was -- i.e. not humanized at all?</p>","replies":[]},{"postId":"887461784","parentPostId":null,"date":"2009-01-21T07:37:18Z","author":"webmack","avatar":"https://www.gravatar.com/avatar/44a3c39612401a447ff04054233a5ae3?d=mm&s=60","message":"<p>I confirm what unwiredbrain says. The script adds the timezoneoffset to the current local time returning a humanized date that is in the future..</p><p>eg. '11 hours' no ago..</p>","replies":[]},{"postId":"887461788","parentPostId":null,"date":"2009-01-21T07:45:59Z","author":"webmack","avatar":"https://www.gravatar.com/avatar/44a3c39612401a447ff04054233a5ae3?d=mm&s=60","message":"<p>replacing line 34 with this fixes it for me:</p><p><code><br>seconds = ((dt - new Date(time)) / 1000),<br></code></p>","replies":[]},{"postId":"887461789","parentPostId":null,"date":"2009-01-21T10:34:46Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>I believe the script should work as intended (as is).</p><p>It should be noted that including a timezone offset into your markup date is not a supported use case for this script.  Outputting UTC time only (no hardcoded offsets in the dates) allows for the JavaScript code to interpret the date <strong>to the offset of the client</strong>.</p><p>I believe that adding support for hardcoded timezone offsets would add unnecessary complexity to the code.  Output Z +/- 0 and it will work fine.</p><p>That being said, if you disagree, feel free to modify the script and re-release it!  It's all open source.</p>","replies":[]},{"postId":"887461794","parentPostId":null,"date":"2009-03-17T00:01:43Z","author":"Frank","avatar":"https://www.gravatar.com/avatar/06575702f53aa1655148ded69fd959e0?d=mm&s=60","message":"<p>Whats are you trying to do with the .replace(/[TZ]/g, \" \") call?</p><p>It ends up removing all the letter Ts.  so some dates fail.</p><p>e.g. \"Thu Feb 5 08:02:38 PST 2009\"  is parsed as<br>          \"hu Feb 5 08:02:38 PST 2009\"  and subsequently fails.</p>","replies":[{"postId":"887477625","parentPostId":"887461794","date":"2009-03-17T05:10:02Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Hey Frank,<br>Take a look at the <a href=\"http://ejohn.org/blog/javascript-pretty-date/\" rel=\"nofollow noopener\" title=\"http://ejohn.org/blog/javascript-pretty-date/\">Original Script</a>, it's intended to take ISO8601 dates, such as \"2008-01-28T20:24:17Z\"</p><p>The T and Z removal make more sense in that context.</p>","replies":[]}]},{"postId":"887461797","parentPostId":null,"date":"2009-04-18T17:15:02Z","author":"Donny Kurnia","avatar":"https://www.gravatar.com/avatar/a4d6bfee60938c23ea234c7951ab242d?d=mm&s=60","message":"<p>Hi, I just find out this post from john post about pretty date.</p><p>@unwiredbrain<br>You must change the date to shown in title attribute into GMT. So it must written as:<br>Some event that just happened</p><p>See that it is 7:45 in GMT, because your timezone is +01:00.</p><p>The javascript will use the browser timezone setting, so the result will be correct.</p><p>If you are using PHP in the server-side, this is the code to change timestamp into GMT (using server's timezone setting), then format it to become ISO.</p><p><a href=\"http://pastie.org/450720\" rel=\"nofollow noopener\" title=\"http://pastie.org/450720\">http://pastie.org/450720</a></p>","replies":[]},{"postId":"887461796","parentPostId":null,"date":"2009-04-18T17:20:10Z","author":"Donny Kurnia","avatar":"https://www.gravatar.com/avatar/a4d6bfee60938c23ea234c7951ab242d?d=mm&s=60","message":"<p>@webmack</p><p>The line 34 is to overcome the timezone setting in user's browser. Since the calculation is done in each user browser, the js script must know how much the time different is.</p><p>If you remove the (dt.getTimezoneOffset() * 60000) addition, all user browser is assumed at GMT.</p><p>The addition is proposed by Dean in the comment at john blog. So the date that must changed is the one in the html. It must in GMT.</p><p>Check my previous comment to find the way to convert local server date into GMT, then show it as ISO format using PHP.</p>","replies":[]},{"postId":"887461787","parentPostId":null,"date":"2009-06-12T04:54:30Z","author":"tristan","avatar":"https://www.gravatar.com/avatar/b8b10bb31fa18f5358f8d2ea154ad9e1?d=mm&s=60","message":"<p>Has anyone else noticed that this script, when implemented with JQuery, will not work on firefox 3? I'm trying to find a solution, but currently it just outputs the original date string, and does not format it...</p>","replies":[]},{"postId":"887461792","parentPostId":null,"date":"2009-06-12T06:03:45Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>I use the script in <a href=\"http://www.alarmd.com/\" rel=\"nofollow noopener\" title=\"http://www.alarmd.com/\">ALARMd</a>, so I know that it works in Firefox 3.  What date are you trying to transform that doesn't work?</p>","replies":[]},{"postId":"887461793","parentPostId":null,"date":"2009-06-12T06:06:44Z","author":"tristan","avatar":"https://www.gravatar.com/avatar/b8b10bb31fa18f5358f8d2ea154ad9e1?d=mm&s=60","message":"<p>Hi there, If you can help you will end hours of head scratching. The dates i'm working with look like: 2009-06-03 20:06:44+0000<br>Firefox finds this as an invalid date.</p>","replies":[]},{"postId":"887461790","parentPostId":null,"date":"2009-06-13T18:38:13Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Hey Tristan, as mentioned in some of the previous comments, your dates should be ISO8601 using GMT:<br>2009-06-03T20:06:44Z</p><p>Thanks!</p>","replies":[]},{"postId":"887461802","parentPostId":null,"date":"2011-08-05T20:00:16Z","author":"Sherman Monroe","avatar":"https://www.gravatar.com/avatar/e5ca0205d236f7525dbb938d1867d52a?d=mm&s=60","message":"<p>Small tweak, it wasn't accounting for GMT time, thus, it parsed 10:00 am CST, which is 15:00 GMT time, and told me \"5 hours ago\" when viewing it at 10:05 am. So I made the following change at line 34, but don't know how this will affect all cases:</p><p>seconds = ((dt - new Date(time) + ((-dt.getTimezoneOffset()/60) * 60000)) / 1000),</p>","replies":[]},{"postId":"887461801","parentPostId":null,"date":"2011-08-05T22:35:34Z","author":"Zach Leatherman","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Hey Sherman,<br>You can make your modification to the GitHub repo and run the unit tests:<br><a href=\"https://github.com/zachleat/Humane-Dates\" rel=\"nofollow noopener\" title=\"https://github.com/zachleat/Humane-Dates\">https://github.com/zachleat...</a></p><p>Feel free to put in a Pull Request and I'll merge it in.<br>Zach</p>","replies":[]},{"postId":"887461803","parentPostId":null,"date":"2011-10-19T06:07:11Z","author":"Johnie R","avatar":"https://www.gravatar.com/avatar/3fc03d38edd09db586321b4e39dfde41?d=mm&s=60","message":"<p>Hey guys, I am pretty new to JS, but i am curious, if i wanted a date older than 4 weeks to say the actual date, how hard is that?</p><p>Example: instead of saying 1 month ago, how about just September 18 @ 10:06PM.</p><p>any feedback is appreciated. thanks.</p>","replies":[]},{"postId":"887461804","parentPostId":null,"date":"2012-02-07T15:43:03Z","author":"Aravind NC","avatar":"https://www.gravatar.com/avatar/933e9a750932be0eb31b4cdc179563f9?d=mm&s=60","message":"<p>You saved the day man !!! Thanks a lot</p>","replies":[]}]}}