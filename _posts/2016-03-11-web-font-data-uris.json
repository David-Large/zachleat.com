{"disqus":{"path":"/web/web-font-data-uris/","commentCount":17,"comments":[{"postId":"2714921121","parentPostId":null,"date":"2016-06-06T16:29:50Z","author":"Wim Leers","avatar":"https://www.gravatar.com/avatar/d0d17378b21f669a28ac7ea4013091f7?d=mm&s=60","message":"<p>Nice article, although it starts with a premise that isn't what I actually said/meant, as you explain later in the blog post. You could've also seen that it's not what I meant by looking at the source code of <a href=\"http://wimleers.com\" rel=\"nofollow noopener\" title=\"wimleers.com\">wimleers.com</a> of course ;)</p><p>The 4 downsides you list are indeed true of the approach you described (but it's not the one I use). With the approach I use, you say only downsides 1, 2 and 4 remain.</p><p>Downside 1 is definitely true, but I accept that trade-off. I'd rather not have to deal with the case of the font not being loaded yet. Plus, inlining critical CSS is tricky to automate, especially in a modular site where only the necessary CSS is loaded. I don't want to have to update my inline critical CSS manually every time I update Drupal modules.</p><p>Downside 2 is also true, but … what I did 4 years ago still works, and still works fast. WOFF2 still has only 54% browser support. I'll just stick with WOFF for now. It also means I'm not embedding the same font in two formats in my CSS file. So, once again a conscious trade-off.</p><p>Downside 4: I think it's better to simply completely avoid ever loading multiple fonts. Stick to a single font. Yes, my site will perhaps look less special, but I think that's okay. I use the font where it matters.</p><p>But you forget to list the downside of the approaches you do recommend: complexity &amp; maintainability. Having fonts in many formats means updating those fonts, and keeping them in sync in each format. WOFF and WOFF2 didn't exist yet when I applied my technique. You have to deal with FOUT.</p><p>I think the technique strikes a nice balance:<br>1. use a single font, with subsetting performed — this makes it very small<br>2. convert it to WOFF (88% browser support currently)<br>3. embed WOFF in CSS as data: URI<br>4. ensure you have as little CSS as possible, and only a single file</p><p>The end result is simple, prevents FOUT altogether, has a single critical resource in the critical path (besides the HTML), and has subsequent sub-second cold load times in Europe, sub-2-second load times in USA, sub-500ms warm load times everywhere.</p><p>So, I think this is a fine solution for non-high-end sites.</p><p>As always: needs differ, compromises need to be made. We can't _always_ look for the absolute best solution. And the absolute best solution is itself usually a compromise, at least in the world of the WWW :)</p><p>(Remember, this is my personal site, not a multi-million-dollar-revenue-generating site.)</p>","replies":[{"postId":"2719860012","parentPostId":"2714921121","date":"2016-06-09T01:48:39Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>I hope that the article didn’t come across as calling you out—I have since learned that <a href=\"http://medium.com\" rel=\"nofollow noopener\" title=\"medium.com\">medium.com</a> takes a similar approach (except they use quite a few embedded Data URIs). For me, the approach I’ve documented above has the best tradeoffs dealing with unreliable and slow network connections, while only sacrificing a minimal amount of initial rendering for a single web font.</p><p>If I only used one web font (which is kind of uncommon on the projects I’ve worked on that used them), I may embed the whole thing as you’ve suggested.</p>","replies":[{"postId":"2724881740","parentPostId":"2719860012","date":"2016-06-11T12:33:44Z","author":"Wim Leers","avatar":"https://www.gravatar.com/avatar/d0d17378b21f669a28ac7ea4013091f7?d=mm&s=60","message":"<p>It felt that way at first, but it's okay — I know you didn't intend it that way :)</p><p>I think it makes sense that people choose different trade-offs for different projects. That's mostly why I left a comment: to clarify that I chose this while I very well knew this wasn't the optimal approach, but it was the simplest approach that solved the problem I saw, back in 2012.</p><p>Thanks for writing about this, and for doing all the research you do in determining what <em>is</em> the optimal approach!</p>","replies":[]}]}]},{"postId":"2787845277","parentPostId":null,"date":"2016-07-17T14:01:45Z","author":"mobiles","avatar":"https://www.gravatar.com/avatar/3f438c5c59dce1269d582eb49608e0f0?d=mm&s=60","message":"<p>Great article (and the one linked to by Ansel on Smashing Mag) but how to inline a font (ttf?).  Is there some convertor online to make it into something to add to a CSS?</p>","replies":[{"postId":"2794530355","parentPostId":"2787845277","date":"2016-07-21T02:28:22Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Anything that creates a Data URI will do it.</p><p>I think the easiest thing is probably to use the Font Squirrel WebFont Generator with the “Base64 Encode” option checked in the Expert mode: <a href=\"https://www.fontsquirrel.com/tools/webfont-generator\" rel=\"nofollow noopener\" title=\"https://www.fontsquirrel.com/tools/webfont-generator\">https://www.fontsquirrel.co...</a></p>","replies":[]}]},{"postId":"2796810879","parentPostId":null,"date":"2016-07-22T06:14:26Z","author":"Stephen James","avatar":"https://www.gravatar.com/avatar/3ddbf93454e3af835de28be002cb07bf?d=mm&s=60","message":"<p>Great article, cleared up a lot and saved me having to get out the the lab coat, thanks again! :)</p>","replies":[]},{"postId":"2873182745","parentPostId":null,"date":"2016-09-02T16:39:00Z","author":"etler","avatar":"https://www.gravatar.com/avatar/0fff9b5aee949e63667e35c162390751?d=mm&s=60","message":"<p>I was looking into doing this and wanted to see if anyone else had tried and your writeup on it answered all my questions and went further in depth than I was planning on going so you saved me a ton of trouble! The idea of inlining a stripped down version of the font is great.</p><p>But how did you get a font down to 5KB? I'm trying with Lato, and with fontsquirrel I can only get it down to about 14KB (woff2), and with FontForge I got it down to 10KB (woff2), but I can't figure out how to get any further. What tools and steps did you use to get it further down?</p><p>Also, you might want to consider renaming the title or putting an edit at the top since the conclusion is that it actually isn't an anti pattern!</p>","replies":[{"postId":"2873280157","parentPostId":"2873182745","date":"2016-09-02T17:39:28Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Check out these tweets: <a href=\"https://twitter.com/zachleat/status/710136938196443136\" rel=\"nofollow noopener\" title=\"https://twitter.com/zachleat/status/710136938196443136\">https://twitter.com/zachlea...</a> <a href=\"https://twitter.com/zachleat/status/710466660172312576\" rel=\"nofollow noopener\" title=\"https://twitter.com/zachleat/status/710466660172312576\">https://twitter.com/zachlea...</a></p>","replies":[{"postId":"2873611179","parentPostId":"2873280157","date":"2016-09-02T21:13:54Z","author":"etler","avatar":"https://www.gravatar.com/avatar/0fff9b5aee949e63667e35c162390751?d=mm&s=60","message":"<p>Thanks for the response, I did read those tweets, I just couldn't find the right tools to do all that.</p>","replies":[{"postId":"2873614519","parentPostId":"2873611179","date":"2016-09-02T21:16:27Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>I believe the actual command used was:</p><p>pyftsubset lato-regular-alphabetsubset.ttf --glyphs=A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,space --verbose --no-hinting --desubroutinize --drop-tables+=GSUB --flavor=woff</p>","replies":[{"postId":"2873658155","parentPostId":"2873614519","date":"2016-09-02T21:50:12Z","author":"etler","avatar":"https://www.gravatar.com/avatar/0fff9b5aee949e63667e35c162390751?d=mm&s=60","message":"<p>Thanks a ton! Awesome stuff</p>","replies":[]}]}]}]}]},{"postId":"3337888418","parentPostId":null,"date":"2017-06-02T22:52:42Z","author":"David Alimian","avatar":"https://www.gravatar.com/avatar/4c9749ebf6a7b8c47a967a7dce6d6895?d=mm&s=60","message":"<p>u might want to reconsider classifying this as anti pattern cause woff2 enjoys lot more support now since time of this writing (abt 80-90% in US)</p>","replies":[{"postId":"3348998476","parentPostId":"3337888418","date":"2017-06-08T20:12:04Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Not sure what you’re saying here. Can you clarify?</p>","replies":[{"postId":"3352965974","parentPostId":"3348998476","date":"2017-06-10T23:19:03Z","author":"David Alimian","avatar":"https://www.gravatar.com/avatar/4c9749ebf6a7b8c47a967a7dce6d6895?d=mm&s=60","message":"<p>sorry, I meant woff2 enjoys lot more browser support now than just not too long ago. <a href=\"http://caniuse.com/woff2/embed/\" rel=\"nofollow noopener\" title=\"http://caniuse.com/woff2/embed/\">http://caniuse.com/woff2/em...</a> . with safari 10 on ios now supporting woff2 my rough estimate is 80-90% of web users in united states are on a browser that supports woff2. so maybe in some case now it would be worth having the woff2 as data uri?</p>","replies":[{"postId":"3355240729","parentPostId":"3352965974","date":"2017-06-12T15:11:02Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Yeah, in some cases that might make sense!</p><p>Depends on where in the resource hierarchy you want to place your web fonts. I think the ubiquity of a WOFF still outweighs the marginal performance benefit here, but your priorities may differ!</p><p>To be clear though, I probably wouldn’t use this method. A full list of methods and opinions can be found here: <a href=\"https://www.zachleat.com/web/comprehensive-webfonts/\" rel=\"nofollow noopener\" title=\"https://www.zachleat.com/web/comprehensive-webfonts/\">https://www.zachleat.com/we...</a></p>","replies":[]}]}]}]},{"postId":"3444339106","parentPostId":null,"date":"2017-07-31T11:55:33Z","author":"Jonas","avatar":"https://www.gravatar.com/avatar/26d579657c0fe25b0e886b2cfde6bd09?d=mm&s=60","message":"<p>Hey Zach, great article :)! <br>I'm curious as per the March 17th update. How did you optimize the font subset to 5KB from 15KB?</p><p>Having a similar issue right now because we load a lot of fonts, but I want to go with only the small subset. Currently that's 19KB so it's a no-go if I can't reduce to at least ~10KB :)</p><p>Thanks a lot!</p>","replies":[{"postId":"3459381146","parentPostId":"3444339106","date":"2017-08-09T13:45:28Z","author":"zachleat","avatar":"https://www.gravatar.com/avatar/e1899004c71c7043343196103e210be3?d=mm&s=60","message":"<p>Hey Jonas—thanks! Did you see this comment? <a href=\"https://www.zachleat.com/web/web-font-data-uris/#comment-2873614519\" rel=\"nofollow noopener\" title=\"https://www.zachleat.com/web/web-font-data-uris/#comment-2873614519\">https://www.zachleat.com/we...</a></p><p>You may also enjoy this article from Roel Nieskens: <a href=\"https://pixelambacht.nl/2016/font-awesome-fixed/\" rel=\"nofollow noopener\" title=\"https://pixelambacht.nl/2016/font-awesome-fixed/\">https://pixelambacht.nl/201...</a></p>","replies":[]}]}]}}