{"disqus":{"path":"/web/using-phing-to-automate-javascript-and-css-minimization/","commentCount":3,"comments":[{"postId":"887461664","parentPostId":null,"date":"2010-03-05T04:29:22Z","author":"Tristan Eastburn","avatar":"https://www.gravatar.com/avatar/69cbc1672ef24dd68b92bd5c243c8de1?d=mm&s=60","message":"<p>Thanks a lot for these filters! They work quite well so far and saved me a lot of time.</p><p>I know you wrote this article 2.5 years ago, but I ran across a tiny bug with in the CssTidyFilter where the \"remove_last_;\" property doesn't get set properly, though. The bug appears for me with Phing 2.4.0 and CssTidy 1.3 on Ubuntu 9.10 Karmic, haven't tested other versions.</p><p>My build file has this line:<br>$lt;param name=\"remove_last_;\" value=\"true\"/&gt;</p><p>And putting an echo in CssTidyFilter after calling getParam() shows that somewhere along the way it gets changed:<br>var_dump($this-&gt;removeLastSemicolon) = string(1) \"1\"</p><p>So the following assignment fails:<br>$css-&gt;set_cfg('remove_last_;',$this-&gt;removeLastSemicolon=='true'?true:false);</p><p>I will send a patch to the author, but in case he can't get to it or no longer maintains this project, you can just do this (around line 202):<br>$css-&gt;set_cfg('remove_last_;',!empty($this-&gt;removeLastSemicolon)?true:false);</p><p>This fix may or may not work for other properties, I have not tried it. The other properties I use ('merge_selectors', 'template' and 'preserveCss') seem to work fine.</p><p>Another suggested change would be to use \"require_once()\" instead of \"include_once()\" as the script should fail if it can't find the files it depends on.</p>","replies":[]},{"postId":"887461666","parentPostId":null,"date":"2010-03-05T05:28:32Z","author":"Tristan Eastburn","avatar":"https://www.gravatar.com/avatar/69cbc1672ef24dd68b92bd5c243c8de1?d=mm&s=60","message":"<p>OK I spoke a little soon :)</p><p>Line 216 (preserveCss) also need the fix from the above comment.</p><p>Also, properties with number values, i.e. lines 199, 203 and 209 (optimizeShortand, propertyCase and mergeSelectors) need to be changed from:<br>if(!empty($this-&gt;propertyName))</p><p>to:<br>if(isset($this-&gt;propertyName))</p><p>since they all have number values, empty() will fail for their 0 value.</p>","replies":[]},{"postId":"887461667","parentPostId":null,"date":"2011-06-23T09:25:07Z","author":"iVariable","avatar":"https://www.gravatar.com/avatar/4f535722ff13430fcf1c59c29b6cc67f?d=mm&s=60","message":"<p>Thanks a lot! You've saved me some time ^_^</p>","replies":[]}]}}